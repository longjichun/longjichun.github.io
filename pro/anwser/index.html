<!DOCTYPE HTML>
<html>
<head>
    <title>党内法规答题活动</title>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="content-type" name="viewport" id="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="icon" href="" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="css/part.css?time=20180401" />
    <link rel="stylesheet" type="text/css" href="css/newly.css?time=20180401" />
    <!--<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>-->
    <script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
    <!--<script type="text/javascript" src="js/js.cookie-2.2.0.min.js"></script>-->
    <script type="text/javascript" src="js/common.js"></script>

</head>
<body>
<!-- 强制关注公众号 -->
<!-- Skin hook模块 -->
<link rel="stylesheet" type="text/css" href="css/hook.css" />
<section id="sec1" class="hide">
    <div class="operation">
        <a id="startAnser" class="sure" href="javascript:void(0)">开始答题</a>
        <div class="links">
            <a href="./rank.html" class="viewRankList">查看排行</a>
            <span>|</span>
            <a href="./learling.html">我要学习</a>
            <span>|</span>
            <a href="./rule.html">活动规则</a>
        </div>
    </div>
</section>
<section id="sec2" class="hide">
    <div class="content">
        <div class="header"></div>
        <div class="forminfo">
            <ol>
                <li>
                    <div class="icon spritIcon"></div>
                    <div class="gap">|</div>
                    <div class="ipt">
                        <input type="text" placeholder="请输入您的真实姓名">
                    </div>
                </li>
                <li>
                    <div class="icon spritIcon"></div>
                    <div class="gap">|</div>
                    <div class="ipt sel">
                        <select id="royal">
                            <option value="0">请选择市州</option>
                            <option value="长沙">"长沙"</option>
                            <option value="株洲">"株洲"</option>
                            <option value="湘潭">"湘潭"</option>
                            <option value="衡阳">"衡阳"</option>
                            <option value="邵阳">"邵阳"</option>
                            <option value="岳阳">"岳阳"</option>
                            <option value="益阳">"益阳"</option>
                            <option value="娄底">"娄底"</option>
                            <option value="常德">"常德"</option>
                            <option value="郴州">"郴州"</option>
                            <option value="永州">"永州"</option>
                            <option value="怀化">"怀化"</option>
                            <option value="湘西">"湘西"</option>
                            <option value="张家界">"张家界"</option>
                        </select>
                        <div class="sanjiao-p">
                            <div class="sanjiao-c"></div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="icon spritIcon"></div>
                    <div class="gap">|</div>
                    <div class="ipt sel">
                        <select id="zone">
                            <option value="0">请选择区县</option>
                        </select>
                        <div class="sanjiao-p">
                            <div class="sanjiao-c"></div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="icon spritIcon"></div>
                    <div class="gap">|</div>
                    <div class="ipt">
                        <input type="text" placeholder="请输入您的单位全称">
                    </div>
                </li>
                <li>
                    <div class="icon spritIcon"></div>
                    <div class="gap">|</div>
                    <div class="ipt">
                        <input type="Number" placeholder="请输入您的手机号码">
                    </div>
                </li>
            </ol>
        </div>
    </div>
    <a href="javascript:void(0);" id="fillMyInfo" class="sure">确认</a>

</section>
<section id="sec3" class="ques-anw ov hid">
    <div class="header-time ov">
        <span>00:00:00</span>
    </div>
    <div class="question">
        <p class="mult"><i></i><span>党组织再纪律审查中发现党员有贪污贿赂、失职渎职等刑法规定的行为涉嫌犯罪的，应当给予___处分。</span></p>
    </div>
    <div class="choice">
        <ul>
            <!-- choosed 已选择     right-anwser 正确答案       选择正确 -->
            <li class="choosed right-anwser"><i class="spritIcon"></i><span>选择一个正确的</span><b class="spritIcon"></b></li>
            <li class="choosed cho-error"><i  class="spritIcon"></i><span>选择一个错误的</span><b class="spritIcon"></b></li>
            <li class="right-anwser"><i class="spritIcon"></i><span>没有选择正确的</span><b class="spritIcon"></b></li>
            <li><i class="spritIcon"></i><span>没有选择错误的</span><b class="spritIcon"></b></li>
        </ul>
    </div>
    <div class="next-que">
        <div class="items">
            <i class="spritIcon tran">tran</i>
            <i class="current">00</i>
            <i>/</i>
            <i class="total">00</i>
        </div>
        <div class="btn-next">下一题</div>
    </div>
</section>
<section id="sec4" class="hide">
    <div class="grade content-wrap">
        <div class="bg"> 
            <div class="header ov">
                <div class="fl name">
                    <span>姓名:</span>
                    <i>王二</i>
                </div>
                <div class="fr used-time">
                    <i></i>
                    <span>00:00:00</span>
                </div>
            </div>
            <div class="result">
                <div class="count">
                    <div class="w">
                        <div class="inner">
                            <div class="num" >50</div>
                            <div class="n">分数</div>
                        </div>
                    </div>
                    
                </div>
                <div class="rank">
                    <div class="w">
                        <div class="inner">
                            <div class="num" style="font-size: 0.5rem;">50</div>
                            <div class="n" style="padding-bottom: 0rem;">排名</div>
                        </div>
                    </div>
                </div>
                <div class="corret">
                    <div class="w">
                        <div class="inner">
                            <div class="num">50</div>
                            <div class="n">正确率</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="btn-reanwser">
        再答一次
    </div>
    <div class="links">
        <a href="./rank.html" class="viewRankList">查看排行</a>
        <span>|</span>
        <a href="./learling.html">我要学习</a>
        <span>|</span>
        <a href="./rule.html">活动规则</a>
    </div>
</section>


<div class="share">
    <div>
        <ul>
            <li>
                <img src="http://moment.rednet.cn/common/img/weibo.png" />
                <span>新浪微博</span>
            </li>
            <li>
                <img src="http://moment.rednet.cn/common/img/wechat.png" />
                <span>微信好友</span>
            </li>
            <li>
                <img src="http://moment.rednet.cn/common/img/pyq.png" />
                <span>微信朋友圈</span>
            </li>
            <li>
                <img src="http://moment.rednet.cn/common/img/qq.png" />
                <span>QQ好友</span>
            </li>
        </ul>
        <div>取消</div>
    </div>
</div>
<script type="text/javascript">
    var BASEURL = 'http://test.app.onlyred.net/'
    var getInitUrl = 'rednetMoment-http/rednetApi.opx?param='

    var ifCanStart = false;
    var param = {
        "header": {"userId":"38","version":"6.0"},
        "method": "answerInfo",
        "myParams":[19],
        "service": "cn.rednet.moment.services.AnswerApi",
        "uuid": "196CC2B6D81F4DAE9DCB1164F878334D"
    }
    function init() {

    }
    function ifInAnwserPeriod() {

    }

    router()
    function router() {

        $("#fillMyInfo").click(function(){
            $("section").hide();
            $("#sec1").show()
        })

        $("#startAnser").on("click",function(){
            var cookie = 'true'
            $("section").hide()
            if(cookie) {
                $("#sec3").show()
            } else {
                $("#sec1").show()
            }
            
        })
        $(".btn-next").click(function(){
            $("section").hide()
            $("#sec4").show()
        })
        $(".btn-reanwser").click(function(){
            $("section").hide()
            $("#sec3").show()
            totalTime()
        })
    }




    function fillNum(n) {
        if(n<10) {
            return '0'+n;
        } else {
            return n;
        }
    }
    function formatTime(n) {
        var h = parseInt(n/3600)
            m = parseInt(n/60)
            s = n%60;
        return fillNum(h) +':'+ fillNum(m)+ ':' + fillNum(s)
    }



    function personalInfo() {
        var arr = [{"child":["芙蓉区","天心区","岳麓区","开福区","雨花区","长沙县","望城区","宁乡市","浏阳市","长沙县网上群众工作部"],"royal":"  "},{"child":["荷塘区","芦淞区","石峰区","天元区","株洲县","攸县","茶陵县","炎陵县","醴陵市","云龙区"],"royal":"株洲"},{"child":["雨湖区","岳塘区","湘潭县","湘乡市","韶山市","昭山示范区"],"royal":"湘潭"},{"child":["雁峰区","珠晖区","蒸湘区","南岳区","石鼓区","衡阳县","衡南县","衡山县","衡东县","祁东县","耒阳市","常宁市"],"royal":"衡阳"},{"child":["双清区","大祥区","北塔区","邵东县","新邵县","邵阳县","隆回县","洞口县","绥宁县","新宁县","城步县","武冈市"],"royal":"邵阳"},{"child":["岳阳楼区","云溪区","君山区","岳阳县","华容县","湘阴县","平江县","汨罗市","临湘市"],"royal":"岳阳"},{"child":["资阳区","赫山区","南县","桃江县","安化县","沅江市"],"royal":"益阳"},{"child":["娄星区","双峰县","新化县","冷水江市","涟源市"],"royal":"娄底"},{"child":["武陵区","鼎城区","安乡县","汉寿县","澧县","临澧县","桃源县","石门县","津市"],"royal":"常德"},{"child":["北湖区","苏仙区","桂阳县","宜章县","永兴县","嘉禾县","临武县","汝城县","桂东县","安仁县","资兴市"],"royal":"郴州"},{"child":["零陵区","冷水滩区","祁阳县","东安县","双牌县","道县","江永县","宁远县","蓝山县","新田县","江华县","金洞管理区","回龙圩管理区"],"royal":"永州"},{"child":["鹤城区","中方县","沅陵县","辰溪县","溆浦县","会同县","麻阳县","新晃县","芷江县","靖州县","通道县","洪江市","洪江区"],"royal":"怀化"},{"child":["吉首市","泸溪县","保靖县","古丈县","永顺县","龙山县","凤凰县","花垣县"],"royal":"湘西"},{"child":["永定区","武陵源区","慈利县","桑植县"],"royal":"张家界"}];
        $("#royal").on("change",function(v,n){
            console.log(v,n)
        })
    }
    (function(){
        // 开始首页
        var startTime = new Date('2018-05-06 18:01:00').getTime()
        var str = ['<i>','','</i>','时','<i>','','</i>','分','<i>','','</i>','秒'];
        setTimeout(function rerender(){
            var currentTime = new Date().getTime();
            var sub = startTime - currentTime;
            if(sub>0) {
                var d = new Date(sub)
                str[1] = d.getUTCHours() + 24*parseInt(sub/(24*60*60*1000));
                str[5] = d.getMinutes()
                str[9] = d.getSeconds()
                $("#startAnser").html(str.join("")).addClass("to-anwser")
                setTimeout(rerender,1000)
            } else {
                $("#startAnser").removeClass("to-anwser").html("开始答题")
            }
        })
    }());

    $("#startAnser").on("click",function(){
        runAnwser()
    });

    var usedTime = 0;
    var runningTime = null;

    function totalTime() {
        usedTime = 0;
        clearTimeout(runningTime)
        $(".header-time span").eq(0).html('00:00:00')
        setTimeout(function repeat() {
            var str = formatTime(usedTime++)
            $(".header-time span").eq(0).html(str)
            if(true) {
                runningTime = setTimeout(repeat,1000)
            }
        },1000)
    }
    function runAnwser() {

        totalTime()
        queryQuestion()
        anwserEventBind()
    }
    function queryQuestion() {
        var url = 'rednetMoment-http/rednetApi.opx?'
        var param = {
                "header":{"userId":"38","version":"6.0"},
                "method":"initAnswerInfoList",
                "myParams":[19],
                "service":"cn.rednet.moment.services.AnswerApi",
                "uuid":"196CC2B6D81F4DAE9DCB1164F878334D"
            };
        $.ajax({
            url: BASEURL+url+enodeURI(JSON.stringify(param)),
            type: "get",
            dataType:"jsonp",
            jsonp: 'jsoncallback',
            jsonpCallback:"success_jsonpCallback",
            success: function(res){

            }
        })
    }
    var currentQuesInd = 0;
    function renderQues(){

    }
    
    function anwserEventBind(arr) {
        var usedTime = 0;
        $(".choice ul li").off("click").on("click",function(e){
            if(true) {
                // 单选在已选择的情况下，选择其它的答案，需要取消当前的
                $(".choosed").removeClass("choosed")
            }
            $(this).addClass('choosed')
            ifNext()
        })
        $(".choosed").off("click").on("click",function(e){
            // 已选择的情况下，又点击，表示取消选择
            $(this).removeClass("choosed")
            ifNext()
        })

        function ifNext() {
            // 是否显示按钮  下一题
            if( $(".choice").find(".choosed").length ) {
                $(".toNext").show()
            } else {
                $(".toNext").hide()
            }
        }

        $(".toNext").click(function(){
            // 点击下一题
            currentQuesInd++;
            renderQues()
        })
    }

    /*
    排名
    */
    (function(){
        shareLink()
        function shareLink() {
            $(".share img, .share span").click(function() {
                var index = $(this).parent().index(), name = null;
                switch (index) {
                    case 0://新浪微博
                        name = "SinaWeiboShare";
                        break;
                    case 1://微信好友
                        name = "WeixinFriendShare";
                        break;
                    case 2://微信朋友圈
                        name = "WeixinJSShare";
                        break;
                    case 3://QQ好友
                        name = "QQShare";
                        break;
                    default:
                        name = "WeixinJSShare";
                        break;
                }
                if (name) {
                    if (ostype == "android") {
                        if(shareFlag)
                            jsBridge.postNotification(name, '{"activity_id": "17", "title": "学习防空防灾知识,掌握防护生存技能", "link": "//moment.rednet.cn/activity/RFActivity/share.html?userid=' + userid + '&achvId=' + achvId +'&ostype=' + ostype + '", "desc": "郴州市人民防空办公室、郴州市教育局举办的中小学人防知识教育教师教案评比和学生网络竞答活动。", "img_url": "//moment.rednet.cn/common/img/RF-logo.png", "phoneNum": "", "is_update": "0"}');
                        else{
                            jsBridge.postNotification(name, '{"activity_id": "17", "title": "学习防空防灾知识,掌握防护生存技能", "link": "//moment.rednet.cn/activity/RFActivity/share.html?userid=' + userid  +'&ostype=' + ostype + '", "desc": "郴州市人民防空办公室、郴州市教育局举办的中小学人防知识教育教师教案评比和学生网络竞答活动。", "img_url": "//moment.rednet.cn/common/img/RF-logo.png", "phoneNum": "", "is_update": "0"}');
                        }

                    } else if (ostype == "ios") {
                        if(shareFlag)
                            jsBridge.postNotification(name, {activity_id: '17', title: '学习防空防灾知识,掌握防护生存技能', link: '//moment.rednet.cn/activity/RFActivity/share.html?userid=' + userid + '&achvId=' + achvId +'&ostype=' + ostype, desc: '郴州市人民防空办公室、郴州市教育局举办的中小学人防知识教育教师教案评比和学生网络竞答活动。', img_url: '//moment.rednet.cn/common/img/RF-logo.png', phoneNum: '', is_update: '0'});
                        else{
                            jsBridge.postNotification(name, {activity_id: '17', title: '学习防空防灾知识,掌握防护生存技能', link: '//moment.rednet.cn/activity/RFActivity/share.html?userid=' + userid  +'&ostype=' + ostype, desc: '郴州市人民防空办公室、郴州市教育局举办的中小学人防知识教育教师教案评比和学生网络竞答活动。', img_url: '//moment.rednet.cn/common/img/RF-logo.png', phoneNum: '', is_update: '0'});
                        }

                    }
                    $(".share").hide();
                }
            });
            $(".share>div>div").click(function() {
                $(".share").hide();
            });
        }

        
    }())


</script>
</body>
</html>